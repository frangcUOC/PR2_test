<!--
  @fitxer chart.html
  @projecte PR2
  @descripció Pàgina principal de la visualització de la PR2.
  @autor Francisco Garcia Caparrós
  @versió 1

  Contingut:
    - Contenidor del gràfic
    - Sliders verticals
    - Warning box
    - Iframe lateral
-->

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=1800">
    <title>Explorador de dades de mortalitat a europa (2013-2023)</title>
    <link rel="stylesheet" href="css/chart.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <div id="chartWrapper">
        <h1 id = graphTitle>Explorador de dades de mortalitat a Europa (2013-2023)</h1>
        <div id="xModeSliderContainer">
            <input type="range" id="xModeSlider" min="0" max="1" value="0" step="1" autocomplete="off">
            <div id="xModeLabels">
                <span>Emissions</span>
                <span>PIB</span>
            </div>
        </div>
        <div id="europeIndicators">
            <div class="indicator">
                <span class="indicator-label"></span>
                <span id="totalDeaths_year">—</span>
            </div>
            <div class="indicator">
                <span class="indicator-label"></span>
                <span id="averageDeaths_year">—</span>
            </div>
            <div class="indicator">
                <span class="indicator-label"></span>
                <span id="totalDeaths">—</span>
            </div>
            <div class="indicator">
                <span class="indicator-label"></span>
                <span id="averageDeaths">—</span>
            </div>
        </div>
        <div id="chart"></div>
        <h2 id="filtersTitle">Filtres</h2>
        <div id="basicFilters">
            <div id="pollutantSliderContainer">
                <div id="pollutantSliderTitle" class="vertical-slider-title">Contaminant</div>
                <input type="range" id="pollutantSlider" autocomplete="off">
                <div id="pollutantLabels"></div>
            </div>
            <div id="pibSliderContainer">
                <div id="pibSliderTitle" class="vertical-slider-title">PIB per càpita</div>
                <input type="range" id="pibSlider" autocomplete="off">
                <div id="pibLabels"></div>
            </div>
        </div>
        <div id="demographicFilters" class="filter-group">
            <div id="demographicTopRow">
                <div class="mode-slider" id="ageBlock">
                    <div class="filter-title-age">Edat</div>
                    <input type="range" min="0" max="5" value="0" step="1" id="ageSlider" autocomplete="off">
                    <div class="mode-labels">
                        <span>Totes</span>
                        <span>&lt;15</span>
                        <span>15–29</span>
                        <span>30–44</span>
                        <span>45–64</span>
                        <span>&ge;65</span>
                    </div>
                </div>
                <div class="mode-slider" id="diseaseBlock">
                    <div class="filter-title-disease">Causa de mort</div>
                    <input type="range" min="0" max="0" value="0" step="1" id="diseaseSlider" autocomplete="off">
                    <div class="mode-labels" id="diseaseLabels"></div>
                </div>
            </div>
            <div id="sexBlock">
                <div class="filter-title-sex">Sexe</div>
                <input type="range" min="0" max="2" value="0" id="sexSlider" autocomplete="off">
                <div class="mode-labels" id="sex-labels">
                    <span>Tots</span>
                    <span>Home</span>
                    <span>Dona</span>
                </div>
            </div>
        </div>

    <div id="yearSliderContainer">
        <h2 id="yearDisplay"></h2>
        <div id="yearControl">
            <button id="playButton">
                <svg id="playPauseIcon" viewBox="0 0 24 24" fill="#333">
                    <polygon points="5,3 19,12 5,21"/>
                </svg>
            </button>
            <input type="range" id="yearSlider" min="2013" max="2023" step="1" value="2013">
        </div>
    </div>
    </div>
    <script src="src/chart/globals.js"></script>
    <script src="src/chart/listeners.js"></script>
    <script src="src/chart/filters.js"></script>
    <script src="src/chart/messages.js"></script>
    <script src="src/chart/chart.js"></script>
    <script src="src/chart/autoplay.js"></script>
    <script src="src/chart/gui.js"></script>
    <script src="src/chart/sliders.js"></script>
    <script src="src/chart/main.js"></script>
    <script>
        if (window.self === window.top) {
            // No estem dins d’un iframe
            init(1024, 600, { top: 40, right: 40, bottom: 60, left: 90 });
        } else {
            // Estem dins d’un iframe
           window.parent.postMessage({ ready: true }, "*");
        }
    </script>

</body>
</html>
